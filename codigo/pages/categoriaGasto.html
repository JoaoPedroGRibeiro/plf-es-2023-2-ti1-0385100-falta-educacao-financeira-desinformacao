<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Cadastro de Categorias</title>
    <link rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/brunoBFsprint3.css">
    <link rel="stylesheet" href="../assets/css/header.css">

  </head>

  <body onload="init()" style="display:flex">
    <header>
      <nav>
        <ul class="navegacao">

          <li>
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" height="24"
                viewBox="0 -960 960 960" width="24"><path
                  d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z" /></svg>
              <p>Conta</p>
            </div>
          </li>
          <li>
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" height="24"
                viewBox="0 -960 960 960" width="24"><path
                  d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z" /></svg>
              <p>Home</p>
            </div>
          </li>
          <a href="gastos.html">
            <li>
              <div>
                <svg xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  viewBox="0 -960 960 960" width="24"><path
                    d="M444-200h70v-50q50-9 86-39t36-89q0-42-24-77t-96-61q-60-20-83-35t-23-41q0-26 18.5-41t53.5-15q32 0 50 15.5t26 38.5l64-26q-11-35-40.5-61T516-710v-50h-70v50q-50 11-78 44t-28 74q0 47 27.5 76t86.5 50q63 23 87.5 41t24.5 47q0 33-23.5 48.5T486-314q-33 0-58.5-20.5T390-396l-66 26q14 48 43.5 77.5T444-252v52Zm36 120q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" /></svg>
                <p>Gastos</p>
              </div>
            </li>
          </a>
          <a href="investimentos.html">
            <li>
              <div>
                <svg xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  viewBox="0 -960 960 960" width="24"><path
                    d="M120-120v-80l80-80v160h-80Zm160 0v-240l80-80v320h-80Zm160 0v-320l80 81v239h-80Zm160 0v-239l80-80v319h-80Zm160 0v-400l80-80v480h-80ZM120-327v-113l280-280 160 160 280-280v113L560-447 400-607 120-327Z" /></svg>
                <p>Investimentos</p>
              </div>
            </li>
          </a>
          <a href="utilitarios.html">
            <li>
              <div>
                <svg xmlns="http://www.w3.org/2000/svg" height="24"
                  viewBox="0 -960 960 960" width="24">
                  <path
                    d="m354-247 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-80l65-281L80-550l288-25 112-265 112 265 288 25-218 189 65 281-247-149L233-80Zm247-350Z" />
                </svg>
                <p>Utilitários</p>
              </div>
            </li>
          </a>
        </ul>
      </nav>
    </header>
      <nav>
        <ul class="navegacao">
          <a href="conta.html">
            <li>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  viewBox="0 -960 960 960"
                  width="24"
                >
                  <path
                    d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"
                  />
                </svg>
                <p>Conta</p>
              </div>
            </li>
        </a>
          <li>
            <div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="24"
                viewBox="0 -960 960 960"
                width="24"
              >
                <path
                  d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"
                />
              </svg>
              <p>Home</p>
            </div>
          </li>
          <a href="gastos.html">
            <li>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  viewBox="0 -960 960 960"
                  width="24"
                >
                  <path
                    d="M444-200h70v-50q50-9 86-39t36-89q0-42-24-77t-96-61q-60-20-83-35t-23-41q0-26 18.5-41t53.5-15q32 0 50 15.5t26 38.5l64-26q-11-35-40.5-61T516-710v-50h-70v50q-50 11-78 44t-28 74q0 47 27.5 76t86.5 50q63 23 87.5 41t24.5 47q0 33-23.5 48.5T486-314q-33 0-58.5-20.5T390-396l-66 26q14 48 43.5 77.5T444-252v52Zm36 120q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                  />
                </svg>
                <p>Gastos</p>
              </div>
            </li>
          </a>
          <a href="investimentos.html">
            <li>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  viewBox="0 -960 960 960"
                  width="24"
                >
                  <path
                    d="M120-120v-80l80-80v160h-80Zm160 0v-240l80-80v320h-80Zm160 0v-320l80 81v239h-80Zm160 0v-239l80-80v319h-80Zm160 0v-400l80-80v480h-80ZM120-327v-113l280-280 160 160 280-280v113L560-447 400-607 120-327Z"
                  />
                </svg>
                <p>Investimentos</p>
              </div>
            </li>
          </a>
          <a href="utilitarios.html">
            <li>
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="24"
                  viewBox="0 -960 960 960"
                  width="24"
                >
                  <path
                    d="m354-247 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-80l65-281L80-550l288-25 112-265 112 265 288 25-218 189 65 281-247-149L233-80Zm247-350Z"
                  />
                </svg>
                <p>Utilitários</p>
              </div>
            </li>
          </a>
        </ul>
      </nav>
    </header>

    <div class="container" style="width: 70%; margin-top: 20px">
      <div>
        <a id="btnVoltar" href="cadastroGastos.html">Voltar</a>
        <h1>Cadastro de Categorias</h1>
      </div>

      <div class="row">
        <div id="msg" class="col-sm-10 offset-sm-1 ">

        </div>
      </div>

      <form id="form-contato">
        <div class="form-group row">
          <div class="col-sm-4">
            <label for="inputId">Id</label>
            <input type="text" class="form-control" id="inputId"
              placeholder="ID" disabled>
          </div>
          <div class="col-sm-8">
            <label for="inputCategoria">Categoria</label>
            <input type="text" class="form-control" id="inputCategoria" required
              placeholder="Informe a categoria do gasto">
          </div>
        </div>

        <div class="form-group row"
          style="display: flex; flex-direction: column;">
          <div class="form-group row">
            <div class="col-sm-14-md-12">
              <input type="button" id="btnInsert"
                value="Inserir">
              <input type="button" id="btnUpdate"
                value="Alterar">
              <input type="button" id="btnDelete"
                value="Excluir">
              <input type="button" id="btnClear"
                value="Limpar Form">
            </div>
          </div>
        </form>

        <div class="row">
          <div class="col-sm-14" style="width: 100%;">
            <table id="grid-gastos" class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Nome</th>
                </tr>
              </thead>
              <tbody id="table-gastos">
                <tr>
                  <td scope="row">1</td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <script src="../assets/js/brunoBFsprint3.js"></script>
        <script>
    function exibeGastos() {
      tableGastos = document.getElementById("table-gastos");


      tableGastos.innerHTML = "";

      readGastos(dados => {

        for (i = 0; i < dados.length; i++) {
          let gastos = dados[i];
          tableGastos.innerHTML += `<tr><td scope="row">${gastos.id}</td>
                                                    <td>${gastos.nome}</td>
                                                </tr>`;
        }
      })
    }

    function init() {

      formGastos = document.getElementById("form-gastos");


      btnInsert = document.getElementById("btnInsert");
      btnInsert.addEventListener('click', function () {
        let campoCategoria = document.getElementById('inputCategoria').value;

        let gastos = {
        nome: campoCategoria,
        };
        createGastos(gastos, exibeGastos);
        formGastos.reset()
      });


      btnUpdate = document.getElementById("btnUpdate");
      btnUpdate.addEventListener('click', function () {

        let campoId = document.getElementById("inputId").value;
        if (campoId == "") {
          displayMessage("Selecione antes um contato para ser alterado.");
          return;
        }

        let campoCategoria = document.getElementById('inputCategoria').value;

        let gastos = {
          nome: campoCategoria,
        };

        updateGastos(parseInt(campoId), gastos, exibeGastos);
        formGastos.reset()
      });


      btnDelete = document.getElementById('btnDelete');
      btnDelete.addEventListener('click', function () {
        let campoId = document.getElementById('inputId').value;
        if (campoId == "") {
          displayMessage("Selecione um contato a ser excluído.");
          return;
        }
        deleteGastos(parseInt(campoId), exibeGastos);


        formGastos.reset()
      });


      btnClear = document.getElementById('btnClear');
      btnClear.addEventListener('click', function () {
        formGastos.reset()
      });


      msg = document.getElementById('msg');
      msg.addEventListener("DOMSubtreeModified", function (e) {
        if (e.target.innerHTML == "") return;
        setTimeout(function () {
          alert = msg.getElementsByClassName("alert");
          alert[0].remove();
        }, 5000);
      })


      gridGastos = document.getElementById("grid-gastos");
      gridGastos.addEventListener('click', function (e) {
        if (e.target.tagName == "TD") {


          let linhaGastos = e.target.parentNode;
          colunas = linhaGastos.querySelectorAll("td");


          document.getElementById('inputId').value = colunas[0].innerText;
          document.getElementById('inputCategoria').value = colunas[5].innerText;

        }
      });

      exibeGastos();
    }
  </script>
      </body>

    </html>